(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{40:function(e,t,a){"use strict";a.d(t,"j",(function(){return b})),a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return i})),a.d(t,"b",(function(){return c})),a.d(t,"h",(function(){return u})),a.d(t,"i",(function(){return m})),a.d(t,"g",(function(){return h})),a.d(t,"f",(function(){return f})),a.d(t,"l",(function(){return p})),a.d(t,"k",(function(){return v})),a.d(t,"a",(function(){return o})),a.d(t,"e",(function(){return s})),a.d(t,"m",(function(){return d}));var r=a(6);function n(e){var t=e.id;return Object(r.b)({method:"post",url:"/checkGameIdExist",data:{id:t}})}function i(e){return p(e.originId)?e.gameName?0===e.checkbox.length?(this.$Message.error("选择作弊方式"),!1):4!==e.captcha.length?(this.$Message.error("正确填写验证码"),!1):0===p(e.description).length?(this.$Message.error("论述必填"),!1):void 0:(this.$Message.error("选择游戏"),!1):(this.$Message.error("请填写举报游戏ID"),!1)}var o=[{value:"stealth",label:"隐身"},{value:"wallhack",label:"透视"},{value:"aimbot",label:"自瞄"},{value:"oneShotKill",label:"秒杀"},{value:"gadgetModify",label:"改装备"},{value:"damageChange",label:"改伤"},{value:"shootingThroughWalls",label:"子弹穿墙"}];function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e||"",a=[];return _.each(t.split(","),(function(e){_.each(o,(function(t,r){t.value===e&&a.push(t.label)}))})),a.sort().reverse().join(" ")}var c=[{value:"0",label:"未处理"},{value:"5",label:"回复讨论中"},{value:"6",label:"等待管理确认"},{value:"1",label:"认为石锤"},{value:"2",label:"嫌疑再观察"},{value:"3",label:"认为没开挂"},{value:"4",label:"回收站"}],l=[{value:"bf1",label:"战地1"},{value:"bfv",label:"战地v"}];function u(e){var t=_.find(c,(function(t,a){return t.value===e}));return t?t.label:""}function m(e){var t=_.find(l,(function(t,a){return t.value===e}));return t?t.label:""}function h(e){var t=e;return t=function(e){return e.replace(/([a-z\-_0-9\/\:\.]*\.(jpg|jpeg|png|gif))/gi,(function(e){return'<img src="'.concat(e,'" />')}))}(t=function(e){return e.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,(function(e){return/(jpg|jpeg|png|gif)$/gi.test(e)?e:-1!==new URL(e).hostname.indexOf("bfban.com")?'<a href="'.concat(e,'">').concat(e,"</a>"):'<a target="_blank" href="'.concat(e,'">').concat(e,"</a>")}))}(t=function(e){return e.replace(/\r\n|\r|\n/g,"<br />")}(t)))}function f(e){var t=moment.tz.guess();return moment(e).clone().tz(t).format("YYYY-MM-DD HH:mm:ss")}function p(e){return e.replace(/\s+/g,"")}function v(e){return/\s+/.test(e)}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=this;t.style="display: none;";var a=document.createElement("span");t.parentNode.insertBefore(a,t.nextSibling);var r=e;a.innerText="等待 ".concat(r," 秒后重试");var n=setInterval((function(){r>1?(r-=1,a.innerText="等待 ".concat(r," 秒重试")):(t.style="",a.innerText="",clearInterval(n))}),1e3)}function b(e){return e.replace(/\s+(src)=/gi," data-src=")}},66:function(e,t,a){"use strict";a.r(t);var r=a(41),n=a.n(r),i=a(42),o=a.n(i),s=a(64),c=a(40),l=a(6),u={data:function(){return{formItem:{gameName:"",originId:"",bilibiliLink:"",checkbox:["aimbot"],description:"尽可能详细的列举被举报人的作弊证据",captcha:"",originUserId:"",originPersonaId:"",avatarLink:""},spinShow:!1,cheatMethodsGlossary:c.a}},components:{Misc:s.default},methods:{checkVideoAndImg:function(){return!(!Object(c.l)(this.formItem.bilibiliLink)&&!/(http(s?):)([/|.|\w|\s|-])*\.(?:jpe?g|gif|png|bmp)/.test(this.formItem.description))||(this.$Message.error("请上传图片或填写视频链接"),!1)},refreshCaptcha:function(){this.$refs.captcha.src=l.a+"/captcha?r="+Math.random(),c.m.call(this.$refs.reCaptcha)},handleMiscChange:function(e){this.formItem.description=e},doReport:function(e){var t=this;return!1!==c.d.call(this,this.formItem)&&(!1!==this.checkVideoAndImg()&&(this.spinShow=!0,void Object(c.c)({id:Object(c.l)(this.formItem.originId)}).then(function(){var e=o()(n.a.mark((function e(a){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.data,!r.idExist){e.next=10;break}return t.formItem.originUserId=r.originUserId,t.formItem.originPersonaId=r.originPersonaId,t.formItem.avatarLink=r.avatarLink,e.next=8,t.handleReport();case 8:e.next=12;break;case 10:t.spinShow=!1,t.$Message.error("游戏ID不存在，请检查拼写");case 12:t.formItem.captcha="",t.refreshCaptcha();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())))},handleReport:function(){var e=this;this.spinShow=!0;var t=this.formItem.checkbox.join(","),a=this.formItem,r=a.gameName,n=a.originUserId,i=a.originPersonaId,o=a.avatarLink,s=a.captcha,u=Object(c.l)(this.formItem.originId),m=Object(c.l)(this.formItem.bilibiliLink);m&&(m=/^https?:\/\//.test(m)?m:"//"+m);var h=this.formItem.description.trim();Object(l.b)({method:"post",url:"/cheaters/",headers:{},data:{gameName:r,originId:u,cheatMethods:t,bilibiliLink:m,description:h,captcha:s,originUserId:n,originPersonaId:i,avatarLink:o}}).then((function(t){e.spinShow=!1;var a=t.data;0===a.error?(e.$router.push({name:"cheater",params:{game:r,ouid:a.data.originUserId}}),e.$Message.success("提交成功")):e.$Message.error("提交失败 "+a.msg)}))}}},m=a(1),h=Object(m.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"content"},[a("Form",{staticStyle:{position:"relative"},attrs:{"label-width":80}},[a("Divider",[e._v("举报作弊")]),e._v(" "),a("FormItem",{attrs:{label:"游戏名"}},[a("span",{staticClass:"hint"},[e._v("已经支持 战地V 举报啦！")]),e._v(" "),a("RadioGroup",{attrs:{type:"button"},model:{value:e.formItem.gameName,callback:function(t){e.$set(e.formItem,"gameName",t)},expression:"formItem.gameName"}},[a("Radio",{attrs:{label:"bf1"}},[a("span",[e._v("战地1")])]),e._v(" "),a("Radio",{attrs:{label:"bfv"}},[a("span",[e._v("战地v")])])],1)],1),e._v(" "),a("FormItem",{attrs:{label:"游戏ID"}},[a("span",{staticClass:"hint"},[e._v("一次只填写一个ID，不要把战队名字写进来，不要写成自己的ID")]),e._v(" "),a("span",{staticClass:"hint"},[e._v("游戏ID是不区分大小写的，但请特别注意区分 i I 1 l L o O 0，正确填写举报ID")]),e._v(" "),a("p",{staticStyle:{"font-size":"2rem"}},[e._v(e._s(e.formItem.originId))]),e._v(" "),a("Input",{attrs:{placeholder:"请一次只填写一个ID"},model:{value:e.formItem.originId,callback:function(t){e.$set(e.formItem,"originId",t)},expression:"formItem.originId"}})],1),e._v(" "),a("FormItem",{attrs:{label:"作弊方式"}},[a("CheckboxGroup",{model:{value:e.formItem.checkbox,callback:function(t){e.$set(e.formItem,"checkbox",t)},expression:"formItem.checkbox"}},e._l(e.cheatMethodsGlossary,(function(t){return a("Checkbox",{key:t.value,attrs:{label:t.value}},[e._v("\n            "+e._s(t.label)+"\n          ")])})),1)],1),e._v(" "),a("FormItem",{attrs:{label:"视频链接"}},[a("Alert",{attrs:{type:"warning"}},[e._v("\n          不想注册国内账号、嫌麻烦，上传视频可以前往 "),a("a",{attrs:{target:"_blank",href:"https://streamable.com/"}},[e._v("https://streamable.com/")]),e._v("，然后地址贴在下方\n        ")]),e._v(" "),a("span",{staticClass:"hint"},[e._v("可以是 优酷，土豆，AB站等 视频网站链接")]),e._v(" "),a("Input",{attrs:{placeholder:"视频链接选填"},model:{value:e.formItem.bilibiliLink,callback:function(t){e.$set(e.formItem,"bilibiliLink",t)},expression:"formItem.bilibiliLink"}})],1),e._v(" "),a("FormItem",{attrs:{label:"论述"}},[a("Alert",{attrs:{type:"warning"}},[e._v("\n          推荐上传 png, jpg, jpeg, gif 格式的图片\n        ")]),e._v(" "),a("Alert",{attrs:{type:"warning"}},[e._v("\n          图片大于 2M 或 上传失败，可以前往 "),a("a",{attrs:{target:"_blank",href:"https://sm.ms"}},[e._v("https://sm.ms")]),e._v("，然后选择 Image URL 选项卡，把图片链接贴在下方\n        ")]),e._v(" "),a("span",{staticClass:"hint"},[e._v("请列出阐明足够的证据，编辑器支持上传图片（限制2M）")]),e._v(" "),a("Misc",{attrs:{content:e.formItem.description},on:{change:e.handleMiscChange}})],1),e._v(" "),a("FormItem",{attrs:{label:"验证码"}},[a("Input",{attrs:{type:"text",placeholder:"验证码"},model:{value:e.formItem.captcha,callback:function(t){e.$set(e.formItem,"captcha",t)},expression:"formItem.captcha"}}),e._v(" "),a("img",{ref:"captcha"}),e._v(" "),a("a",{ref:"reCaptcha",attrs:{href:"#"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.refreshCaptcha(t)}}},[e._v("\n          获得验证码\n        ")])],1),e._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:e.doReport}},[e._v("提交")])],1),e._v(" "),a("Spin",{directives:[{name:"show",rawName:"v-show",value:e.spinShow,expression:"spinShow"}],attrs:{size:"large",fix:""}})],1)],1)])}),[],!1,null,null,null);t.default=h.exports}}]);